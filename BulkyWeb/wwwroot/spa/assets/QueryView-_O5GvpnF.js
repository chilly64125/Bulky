import{a as l,r as e,k as a,l as s,z as t,A as n,D as u,F as o,s as d,t as r,e as i,m as c,w as v,q as m,b as p}from"./vendor-vue-IgQ0LSVQ.js";import{k as b}from"./kindnessService-DAFcZX8q.js";import{_ as f}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-rv2ZoWvM.js";const y={class:"container-fluid py-4"},h={class:"card mb-3"},k={class:"card-body"},w={class:"row"},g={class:"col-md-3"},_={class:"col-md-3"},I=["value"],j={class:"col-md-3"},x=["value"],D={key:0,class:"alert alert-info"},V={key:1,class:"alert alert-danger"},P={key:2,class:"alert alert-warning"},U={key:3},q={class:"table-responsive"},z={class:"table table-hover"},N=f(l({__name:"QueryView",setup(l){const f=e(!1),N=e(null),S=e(""),A=e(""),C=e(""),F=e([]),L=e([1,2,3]),Q=e(["甲區","乙區","丙區","丁區","戊區","己區"]);function R(l){if(!l)return"-";return new Date(l).toLocaleDateString("zh-TW")}async function T(){f.value=!0,N.value=null;try{const{data:l}=await b.query({occupantName:S.value,floor:A.value||void 0,section:C.value});F.value=l.data||[]}catch(l){N.value=(null==l?void 0:l.message)||"查詢失敗"}finally{f.value=!1}}return(l,e)=>{const b=p("router-link");return i(),a("div",y,[e[11]||(e[11]=s("h2",null,"懷恩塔-塔位查詢",-1)),s("div",h,[s("div",k,[s("div",w,[s("div",g,[e[3]||(e[3]=s("label",{class:"form-label"},"搜尋名稱",-1)),t(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>S.value=l),type:"text",class:"form-control",placeholder:"輸入佔用者名稱"},null,512),[[n,S.value]])]),s("div",_,[e[5]||(e[5]=s("label",{class:"form-label"},"樓層",-1)),t(s("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>A.value=l),class:"form-select"},[e[4]||(e[4]=s("option",{value:""},"全部",-1)),(i(!0),a(o,null,d(L.value,l=>(i(),a("option",{key:l,value:l},r(l)+"樓",9,I))),128))],512),[[u,A.value,void 0,{number:!0}]])]),s("div",j,[e[7]||(e[7]=s("label",{class:"form-label"},"區域",-1)),t(s("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>C.value=l),class:"form-select"},[e[6]||(e[6]=s("option",{value:""},"全部",-1)),(i(!0),a(o,null,d(Q.value,l=>(i(),a("option",{key:l,value:l},r(l),9,x))),128))],512),[[u,C.value]])]),s("div",{class:"col-md-3"},[e[8]||(e[8]=s("label",{class:"form-label"}," ",-1)),s("button",{onClick:T,class:"btn btn-primary w-100"},"查詢")])])])]),f.value?(i(),a("div",D,"查詢中...")):N.value?(i(),a("div",V,r(N.value),1)):0===F.value.length?(i(),a("div",P,"無符合結果")):(i(),a("div",U,[s("div",q,[s("table",z,[e[10]||(e[10]=s("thead",null,[s("tr",null,[s("th",null,"位置ID"),s("th",null,"樓層"),s("th",null,"區域"),s("th",null,"列"),s("th",null,"欄"),s("th",null,"佔用者"),s("th",null,"登記日期"),s("th",null,"操作")])],-1)),s("tbody",null,[(i(!0),a(o,null,d(F.value,l=>(i(),a("tr",{key:l.kindnessPositionId},[s("td",null,r(l.kindnessPositionId),1),s("td",null,r(l.floor)+"樓",1),s("td",null,r(l.section),1),s("td",null,r(l.row),1),s("td",null,r(l.column),1),s("td",null,r(l.occupantName||"-"),1),s("td",null,r(R(l.dateRegistered)),1),s("td",null,[c(b,{to:`/kindness/edit/${l.kindnessPositionId}`,class:"btn btn-warning btn-sm"},{default:v(()=>[...e[9]||(e[9]=[m("編輯",-1)])]),_:1},8,["to"])])]))),128))])])])]))])}}}),[["__scopeId","data-v-42d48b44"]]);export{N as default};
