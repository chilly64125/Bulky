import{u as a}from"./index-N31TBcPX.js";import{a as s,k as l,l as n,m as e,b as i,w as t,n as o,u as r,t as d,p as c,e as u,q as p,f as m,F as v,T as b,s as g,v as f,d as w,r as _,o as k,x as y}from"./vendor-vue-IgQ0LSVQ.js";import{u as h}from"./notificationStore-Dw0I-Rqg.js";import{_ as x}from"./_plugin-vue_export-helper-BCo6x5W8.js";const C={class:"navbar navbar-expand-lg navbar-dark bg-primary"},A={class:"container-fluid"},q={class:"d-inline d-md-none"},T={class:"collapse navbar-collapse",id:"navbarNav"},W={class:"navbar-nav ms-auto"},I={key:0,class:"nav-item dropdown d-md-none"},L={class:"dropdown-menu"},j={key:1,class:"nav-item dropdown d-md-none"},N={class:"dropdown-menu"},D={key:2,class:"nav-item dropdown d-md-none"},S={class:"dropdown-menu"},z={key:3,class:"nav-item d-md-none"},F={key:4,class:"nav-item d-md-none"},$={class:"nav-item dropdown d-flex align-items-center"},B={class:"nav-link dropdown-toggle d-flex align-items-center",href:"#",role:"button","data-bs-toggle":"dropdown"},E={class:"me-2"},G=x(s({__name:"Navbar",setup(s){const m=a(),v=c(),b=h(),g=async()=>{await m.logout(),b.success("已登出"),v.push("/login")};return(a,s)=>{var c;const v=i("router-link");return u(),l("nav",C,[n("div",A,[e(v,{class:"navbar-brand d-flex align-items-center",to:"/"},{default:t(()=>[s[0]||(s[0]=n("i",{class:"bi bi-house-fill me-2"},null,-1)),n("span",q,d(r("陳氏宗祠")),1),n("span",{class:"d-none d-md-inline"},d("陳氏宗祠祖先牌位暨懷恩塔家族墓園塔位管理平台"))]),_:1}),s[24]||(s[24]=n("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[n("span",{class:"navbar-toggler-icon"})],-1)),n("div",T,[n("ul",W,[r(m).isAdmin?(u(),l("li",I,[s[6]||(s[6]=n("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown"}," 一.活動管理 ",-1)),n("ul",L,[n("li",null,[e(v,{class:"dropdown-item",to:"/app/category"},{default:t(()=>[...s[1]||(s[1]=[p("活動類別檔",-1)])]),_:1})]),n("li",null,[e(v,{class:"dropdown-item",to:"/app/company"},{default:t(()=>[...s[2]||(s[2]=[p("宗親會基本檔",-1)])]),_:1})]),n("li",null,[e(v,{class:"dropdown-item",to:"/app/product"},{default:t(()=>[...s[3]||(s[3]=[p("活動基本檔",-1)])]),_:1})]),s[5]||(s[5]=n("li",null,[n("hr",{class:"dropdown-divider"})],-1)),n("li",null,[e(v,{class:"dropdown-item",to:"/app/user"},{default:t(()=>[...s[4]||(s[4]=[p("會員管理",-1)])]),_:1})])])])):o("",!0),r(m).isAdmin?(u(),l("li",j,[s[11]||(s[11]=n("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown"}," 二.懷恩塔-塔位管理 ",-1)),n("ul",N,[n("li",null,[e(v,{class:"dropdown-item",to:"/app/kindness"},{default:t(()=>[...s[7]||(s[7]=[p("懐恩塔-塔位-新增",-1)])]),_:1})]),n("li",null,[e(v,{class:"dropdown-item",to:"/app/kindness/query"},{default:t(()=>[...s[8]||(s[8]=[p("懐恩塔-塔位-查詢",-1)])]),_:1})]),s[10]||(s[10]=n("li",null,[n("hr",{class:"dropdown-divider"})],-1)),n("li",null,[e(v,{class:"dropdown-item",to:"/app/user"},{default:t(()=>[...s[9]||(s[9]=[p("會員管理",-1)])]),_:1})])])])):o("",!0),r(m).isAdmin?(u(),l("li",D,[s[16]||(s[16]=n("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown"}," 三.陳氏宗祠-祖先牌位管理 ",-1)),n("ul",S,[n("li",null,[e(v,{class:"dropdown-item",to:"/app/ancestral"},{default:t(()=>[...s[12]||(s[12]=[p("陳氏宗祠-牌位-新增",-1)])]),_:1})]),n("li",null,[e(v,{class:"dropdown-item",to:"/app/ancestral/query"},{default:t(()=>[...s[13]||(s[13]=[p("陳氏宗祠-牌位-查詢",-1)])]),_:1})]),s[15]||(s[15]=n("li",null,[n("hr",{class:"dropdown-divider"})],-1)),n("li",null,[e(v,{class:"dropdown-item",to:"/app/user"},{default:t(()=>[...s[14]||(s[14]=[p("會員管理",-1)])]),_:1})])])])):o("",!0),r(m).isCustomer?(u(),l("li",z,[e(v,{class:"nav-link",to:"/app/kindness/query"},{default:t(()=>[...s[17]||(s[17]=[p("懐恩塔-塔位查詢",-1)])]),_:1})])):o("",!0),r(m).isCustomer?(u(),l("li",F,[e(v,{class:"nav-link",to:"/app/ancestral/query"},{default:t(()=>[...s[18]||(s[18]=[p("陳氏宗祠-牌位查詢",-1)])]),_:1})])):o("",!0),n("li",$,[n("a",B,[s[19]||(s[19]=n("i",{class:"bi bi-person-circle me-1"},null,-1)),n("span",E,d(null==(c=r(m).user)?void 0:c.username),1)]),n("ul",{class:"dropdown-menu"},[s[20]||(s[20]=n("li",null,[n("a",{class:"dropdown-item",href:"#"},"個人資料")],-1)),s[21]||(s[21]=n("li",null,[n("a",{class:"dropdown-item",href:"#"},"設定")],-1)),s[22]||(s[22]=n("li",null,[n("hr",{class:"dropdown-divider"})],-1)),n("li",null,[n("a",{class:"dropdown-item cursor-pointer",onClick:g},"登出")])])]),n("li",{class:"nav-item d-flex align-items-center ms-2"},[n("button",{class:"btn btn-outline-light btn-sm",onClick:g,title:"Logout"},[...s[23]||(s[23]=[n("i",{class:"bi bi-box-arrow-right"},null,-1),n("span",{class:"d-none d-md-inline ms-1"},"登出",-1)])])])])])])])}}}),[["__scopeId","data-v-da178afc"]]),H={class:"sidebar"},J={class:"sidebar-nav"},K={class:"nav flex-column"},M={class:"nav-item"},O={class:"nav-item"},P={class:"nav-item"},Q={class:"nav-item"},R={class:"nav-item"},U={class:"nav-item"},V={class:"nav-item"},X={class:"nav-item"},Y={class:"nav-item"},Z={class:"nav-item"},aa=x(s({__name:"Sidebar",setup(s){const d=a(),b=c(),g=h(),f=m(()=>d.isAdmin?"/app/admin":d.isCustomer?"/app/customer":"/app"),w=async()=>{await d.logout(),g.success("已登出"),b.push("/login")};return(a,s)=>{const c=i("router-link");return u(),l("aside",H,[s[15]||(s[15]=n("div",{class:"sidebar-header"},[n("h5",null,"功能清單")],-1)),n("nav",J,[n("ul",K,[n("li",M,[e(c,{class:"nav-link",to:f.value},{default:t(()=>[...s[0]||(s[0]=[n("i",{class:"bi bi-house-door-fill me-2"},null,-1),p(" 首頁 ",-1)])]),_:1},8,["to"])]),r(d).isAdmin?(u(),l(v,{key:0},[s[8]||(s[8]=n("li",{class:"nav-item-group"},[n("span",{class:"nav-group-title"},"活動管理")],-1)),n("li",O,[e(c,{class:"nav-link",to:"/app/category"},{default:t(()=>[...s[1]||(s[1]=[n("i",{class:"bi bi-tag-fill me-2"},null,-1),p(" 活動類別 ",-1)])]),_:1})]),n("li",P,[e(c,{class:"nav-link",to:"/app/company"},{default:t(()=>[...s[2]||(s[2]=[n("i",{class:"bi bi-building me-2"},null,-1),p(" 宗親會檔案 ",-1)])]),_:1})]),n("li",Q,[e(c,{class:"nav-link",to:"/app/product"},{default:t(()=>[...s[3]||(s[3]=[n("i",{class:"bi bi-box-seam me-2"},null,-1),p(" 活動清單 ",-1)])]),_:1})]),s[9]||(s[9]=n("li",{class:"nav-item-group"},[n("span",{class:"nav-group-title"},"位置管理")],-1)),n("li",R,[e(c,{class:"nav-link",to:"/app/kindness"},{default:t(()=>[...s[4]||(s[4]=[n("i",{class:"bi bi-door-closed me-2"},null,-1),p(" 懐恩塔管理 ",-1)])]),_:1})]),n("li",U,[e(c,{class:"nav-link",to:"/app/ancestral"},{default:t(()=>[...s[5]||(s[5]=[n("i",{class:"bi bi-diagram-3 me-2"},null,-1),p(" 宗祠牌位管理 ",-1)])]),_:1})]),s[10]||(s[10]=n("li",{class:"nav-item-group"},[n("span",{class:"nav-group-title"},"系統管理")],-1)),n("li",V,[e(c,{class:"nav-link",to:"/app/user"},{default:t(()=>[...s[6]||(s[6]=[n("i",{class:"bi bi-people-fill me-2"},null,-1),p(" 會員管理 ",-1)])]),_:1})]),n("li",X,[e(c,{class:"nav-link",to:"/app/order"},{default:t(()=>[...s[7]||(s[7]=[n("i",{class:"bi bi-cart-check-fill me-2"},null,-1),p(" 訂單管理 ",-1)])]),_:1})])],64)):o("",!0),r(d).isCustomer?(u(),l(v,{key:1},[s[13]||(s[13]=n("li",{class:"nav-item-group"},[n("span",{class:"nav-group-title"},"查詢")],-1)),n("li",Y,[e(c,{class:"nav-link",to:"/app/kindness/query"},{default:t(()=>[...s[11]||(s[11]=[n("i",{class:"bi bi-search me-2"},null,-1),p(" 懐恩塔查詢 ",-1)])]),_:1})]),n("li",Z,[e(c,{class:"nav-link",to:"/app/ancestral/query"},{default:t(()=>[...s[12]||(s[12]=[n("i",{class:"bi bi-search me-2"},null,-1),p(" 宗祠牌位查詢 ",-1)])]),_:1})])],64)):o("",!0),n("li",{class:"nav-item mt-2"},[n("a",{class:"nav-link cursor-pointer text-danger",onClick:w},[...s[14]||(s[14]=[n("i",{class:"bi bi-box-arrow-right me-2"},null,-1),p(" 登出 ",-1)])])])])])])}}}),[["__scopeId","data-v-5e2166aa"]]),sa={class:"toast-container position-fixed top-0 end-0 p-3",style:{"z-index":"9999"}},la={class:"toast-header"},na={class:"me-auto"},ea=["onClick"],ia={class:"toast-body"},ta=x(s({__name:"ToastContainer",setup(a){const s=h(),i=a=>({success:"成功",error:"錯誤",info:"訊息",warning:"警告"}[a]);return(a,o)=>(u(),l("div",sa,[e(b,{name:"slide",tag:"div"},{default:t(()=>[(u(!0),l(v,null,g(r(s).toasts,a=>{return u(),l("div",{key:a.id,class:f(["toast show mb-2",`toast-${a.type}`]),role:"alert"},[n("div",la,[n("strong",na,[n("i",{class:f([(e=a.type,{success:"bi bi-check-circle-fill text-success",error:"bi bi-exclamation-circle-fill text-danger",info:"bi bi-info-circle-fill text-info",warning:"bi bi-exclamation-triangle-fill text-warning"}[e]),"me-2"])},null,2),p(" "+d(i(a.type)),1)]),n("button",{type:"button",class:"btn-close",onClick:l=>r(s).removeToast(a.id)},null,8,ea)]),n("div",ia,d(a.message),1)],2);var e}),128))]),_:1})]))}}),[["__scopeId","data-v-f250305c"]]),oa=w("session",()=>{const a=_(Date.now()),s=_(!1),l=_(0);return{lastActivityTime:a,showLogoutWarning:s,remainingTime:l,updateActivity:()=>{a.value=Date.now(),s.value=!1,l.value=0},showWarning:a=>{s.value=!0,l.value=a},hideWarning:()=>{s.value=!1}}}),ra={key:0,class:"logout-warning-overlay"},da={class:"logout-warning-modal"},ca={class:"modal-body"},ua=x(s({__name:"AutoLogoutWarning",setup(s){const e=oa();a(),c();const i=h();k(()=>{}),y(()=>{});const t=()=>{e.hideWarning()},m=()=>{window.location.assign("https://www.facebook.com/groups/654519621275974")},v=async()=>{i.info("自動登出已被暫時停用")};return(a,s)=>r(e).showLogoutWarning?(u(),l("div",ra,[n("div",da,[s[3]||(s[3]=n("div",{class:"modal-header"},[n("h5",{class:"modal-title"},[n("i",{class:"bi bi-exclamation-circle-fill text-warning me-2"}),p(" 即將登出 ")])],-1)),n("div",ca,[n("p",null,[s[0]||(s[0]=p("由於長時間未活動，您將在 ",-1)),n("strong",null,d(r(e).remainingTime)+" 秒",1),s[1]||(s[1]=p("後自動登出。",-1))]),s[2]||(s[2]=n("p",null,"如果您需要繼續使用系統，請點擊下方按鈕。",-1))]),n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-secondary",onClick:t},"保持登入"),n("button",{type:"button",class:"btn btn-info",onClick:m},"宗親會官網"),n("button",{type:"button",class:"btn btn-danger",onClick:v},"立即登出")])])])):o("",!0)}}),[["__scopeId","data-v-540f2cd8"]]),pa={class:"app-layout"},ma={class:"main-content"},va={class:"content-area"},ba=x(s({__name:"AppLayout",setup:a=>(a,s)=>{const t=i("router-view");return u(),l("div",pa,[e(G),n("div",ma,[e(aa),n("div",va,[e(t),e(ta)])]),e(ua)])}}),[["__scopeId","data-v-2765930a"]]);export{ba as default};
