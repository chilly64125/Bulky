import{c as t}from"./crudService-BHQG69IU.js";import{u as l}from"./notificationStore-Dw0I-Rqg.js";import{a,r as e,o as n,k as s,l as r,m as u,w as d,b as o,t as c,F as i,s as v,e as p,q as b}from"./vendor-vue-IgQ0LSVQ.js";import"./index-rv2ZoWvM.js";const m={class:"container-fluid py-4"},f={class:"d-flex justify-content-between align-items-center mb-3"},y={key:0,class:"alert alert-info"},h={key:1,class:"alert alert-danger"},g={key:2,class:"alert alert-warning"},k={key:3,class:"table-responsive"},w={class:"table table-hover"},I=["onClick"],j=a({__name:"IndexView",setup(a){const j=l(),x=e(!1),_=e(null),C=e([]),D=t("/product");async function S(){x.value=!0,_.value=null;try{const{data:t}=await D.list();C.value=t.data||[]}catch(t){_.value=(null==t?void 0:t.message)||"加載失敗"}finally{x.value=!1}}return n(()=>S()),(t,l)=>{const a=o("router-link");return p(),s("div",m,[r("div",f,[l[1]||(l[1]=r("h2",null,"活動管理",-1)),u(a,{to:"/app/product/add",class:"btn btn-primary"},{default:d(()=>[...l[0]||(l[0]=[b("新增活動",-1)])]),_:1})]),x.value?(p(),s("div",y,"加載中...")):_.value?(p(),s("div",h,c(_.value),1)):0===C.value.length?(p(),s("div",g,"無活動")):(p(),s("div",k,[r("table",w,[l[3]||(l[3]=r("thead",null,[r("tr",null,[r("th",null,"ID"),r("th",null,"標題"),r("th",null,"類別ID"),r("th",null,"價格"),r("th",null,"操作")])],-1)),r("tbody",null,[(p(!0),s(i,null,v(C.value,t=>(p(),s("tr",{key:t.productId},[r("td",null,c(t.productId),1),r("td",null,c(t.title),1),r("td",null,c(t.categoryId),1),r("td",null,"$"+c(t.price),1),r("td",null,[u(a,{to:`/product/edit/${t.productId}`,class:"btn btn-warning btn-sm"},{default:d(()=>[...l[2]||(l[2]=[b("編輯",-1)])]),_:1},8,["to"]),r("button",{class:"btn btn-danger btn-sm",onClick:l=>async function(t){if(confirm("確定要刪除此活動嗎？"))try{await D.delete(t),j.success("活動已刪除"),await S()}catch(l){j.error((null==l?void 0:l.message)||"刪除失敗")}}(t.productId)},"刪除",8,I)])]))),128))])])]))])}}});export{j as default};
