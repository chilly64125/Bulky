import{a,r as e,y as s,k as l,l as r,n as i,z as o,A as n,v as t,t as d,q as m,B as c,e as p,p as u}from"./vendor-vue-IgQ0LSVQ.js";import{c as f,a as v,b}from"./index.esm-nxtYy_By.js";import{u as w}from"./index-rv2ZoWvM.js";import{_ as y}from"./_plugin-vue_export-helper-BCo6x5W8.js";const k={class:"container py-4",style:{"max-width":"520px"}},h={class:"mb-3"},g={key:0,class:"invalid-feedback"},x={class:"mb-3"},j={key:0,class:"invalid-feedback"},P={class:"mb-3"},_={key:0,class:"invalid-feedback"},q={class:"mb-3"},V={key:0,class:"invalid-feedback"},U={class:"d-flex justify-content-end mb-3"},E=["disabled"],O={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},z={key:0,class:"alert alert-danger"},A=y(a({__name:"RegisterView",setup(a){const y=u(),A=w(),B=e(!1),I=e(null),R=s({name:"",email:"",password:"",confirmPassword:""}),S=s({}),C=f({name:v().required("請輸入姓名"),email:v().email("請輸入有效的電子郵件").required("電子郵件為必填"),password:v().min(6,"密碼至少6位").required("密碼為必填"),confirmPassword:v().oneOf([b("password")],"密碼不一致").required("請再次輸入密碼")});async function D(){I.value=null;if(await async function(){try{return await C.validate(R,{abortEarly:!1}),Object.keys(S).forEach(a=>delete S[a]),!0}catch(a){if(Object.keys(S).forEach(a=>delete S[a]),a.inner&&a.inner.length)for(const e of a.inner)e.path&&e.message&&(S[e.path]=e.message);return!1}}()){B.value=!0;try{await A.register({name:R.name,email:R.email,password:R.password}),y.push("/login")}catch(a){I.value=(null==a?void 0:a.message)||"註冊失敗，請稍後再試"}finally{B.value=!1}}}return(a,e)=>(p(),l("div",k,[e[9]||(e[9]=r("h2",{class:"mb-3"},"註冊",-1)),r("form",{onSubmit:c(D,["prevent"]),novalidate:""},[r("div",h,[e[4]||(e[4]=r("label",{class:"form-label"},"姓名",-1)),o(r("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>R.name=a),type:"text",autocomplete:"name",class:t(["form-control",{"is-invalid":S.name}])},null,2),[[n,R.name]]),S.name?(p(),l("div",g,d(S.name),1)):i("",!0)]),r("div",x,[e[5]||(e[5]=r("label",{class:"form-label"},"電子郵件",-1)),o(r("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>R.email=a),type:"email",autocomplete:"email",class:t(["form-control",{"is-invalid":S.email}])},null,2),[[n,R.email]]),S.email?(p(),l("div",j,d(S.email),1)):i("",!0)]),r("div",P,[e[6]||(e[6]=r("label",{class:"form-label"},"密碼",-1)),o(r("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>R.password=a),type:"password",autocomplete:"new-password",class:t(["form-control",{"is-invalid":S.password}])},null,2),[[n,R.password]]),S.password?(p(),l("div",_,d(S.password),1)):i("",!0)]),r("div",q,[e[7]||(e[7]=r("label",{class:"form-label"},"確認密碼",-1)),o(r("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>R.confirmPassword=a),type:"password",autocomplete:"new-password",class:t(["form-control",{"is-invalid":S.confirmPassword}])},null,2),[[n,R.confirmPassword]]),S.confirmPassword?(p(),l("div",V,d(S.confirmPassword),1)):i("",!0)]),r("div",U,[r("button",{class:"btn btn-success",disabled:B.value},[B.value?(p(),l("span",O)):i("",!0),e[8]||(e[8]=m(" 註冊 ",-1))],8,E)]),I.value?(p(),l("div",z,d(I.value),1)):i("",!0)],32)]))}}),[["__scopeId","data-v-4a1f9c4a"]]);export{A as default};
