import{c as a}from"./crudService-BHQG69IU.js";import{u as t}from"./notificationStore-Dw0I-Rqg.js";import{a as l,r as e,o as s,k as n,l as r,m as c,w as u,b as i,t as o,F as d,s as y,e as v,q as b}from"./vendor-vue-IgQ0LSVQ.js";import"./index-rv2ZoWvM.js";const g={class:"container-fluid py-4"},m={class:"d-flex justify-content-between align-items-center mb-3"},f={key:0,class:"alert alert-info"},p={key:1,class:"alert alert-danger"},h={key:2,class:"alert alert-warning"},k={key:3,class:"table-responsive"},w={class:"table table-hover"},I={key:0,class:"badge bg-success"},j={key:1,class:"badge bg-secondary"},x=["onClick"],_=l({__name:"IndexView",setup(l){const _=t(),C=e(!1),S=e(null),q=e([]),A=a("/category");async function D(){C.value=!0,S.value=null;try{const{data:a}=await A.list();q.value=a.data||[]}catch(a){S.value=(null==a?void 0:a.message)||"加載失敗"}finally{C.value=!1}}return s(()=>D()),(a,t)=>{const l=i("router-link");return v(),n("div",g,[r("div",m,[t[1]||(t[1]=r("h2",null,"活動類別",-1)),c(l,{to:"/app/category/add",class:"btn btn-primary"},{default:u(()=>[...t[0]||(t[0]=[b("新增類別",-1)])]),_:1})]),C.value?(v(),n("div",f,"加載中...")):S.value?(v(),n("div",p,o(S.value),1)):0===q.value.length?(v(),n("div",h,"無類別")):(v(),n("div",k,[r("table",w,[t[3]||(t[3]=r("thead",null,[r("tr",null,[r("th",null,"ID"),r("th",null,"名稱"),r("th",null,"排序"),r("th",null,"狀態"),r("th",null,"操作")])],-1)),r("tbody",null,[(v(!0),n(d,null,y(q.value,a=>(v(),n("tr",{key:a.categoryId},[r("td",null,o(a.categoryId),1),r("td",null,o(a.name),1),r("td",null,o(a.displayOrder),1),r("td",null,[a.isActive?(v(),n("span",I,"啟用")):(v(),n("span",j,"禁用"))]),r("td",null,[c(l,{to:`/app/category/edit/${a.categoryId}`,class:"btn btn-warning btn-sm"},{default:u(()=>[...t[2]||(t[2]=[b("編輯",-1)])]),_:1},8,["to"]),r("button",{class:"btn btn-danger btn-sm",onClick:t=>async function(a){if(confirm("確定要刪除此類別嗎？"))try{await A.delete(a),_.success("類別已刪除"),await D()}catch(t){_.error((null==t?void 0:t.message)||"刪除失敗")}}(a.categoryId)},"刪除",8,x)])]))),128))])])]))])}}});export{_ as default};
