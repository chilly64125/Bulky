import{c as a}from"./crudService-BHQG69IU.js";import{u as l}from"./notificationStore-Dw0I-Rqg.js";import{a as t,r as n,o as e,k as s,l as u,m as o,w as i,b as r,t as c,F as d,s as m,e as v,q as y}from"./vendor-vue-IgQ0LSVQ.js";import"./index-rv2ZoWvM.js";const p={class:"container-fluid py-4"},b={class:"d-flex justify-content-between align-items-center mb-3"},f={key:0,class:"alert alert-info"},h={key:1,class:"alert alert-danger"},k={key:2,class:"alert alert-warning"},g={key:3,class:"table-responsive"},w={class:"table table-hover"},I=["onClick"],j=t({__name:"IndexView",setup(t){const j=l(),x=n(!1),_=n(null),C=n([]),S=a("/company");async function q(){x.value=!0,_.value=null;try{const{data:a}=await S.list();C.value=a.data||[]}catch(a){_.value=(null==a?void 0:a.message)||"加載失敗"}finally{x.value=!1}}return e(()=>q()),(a,l)=>{const t=r("router-link");return v(),s("div",p,[u("div",b,[l[1]||(l[1]=u("h2",null,"宗親會基本檔",-1)),o(t,{to:"/app/company/add",class:"btn btn-primary"},{default:i(()=>[...l[0]||(l[0]=[y("新增宗親會",-1)])]),_:1})]),x.value?(v(),s("div",f,"加載中...")):_.value?(v(),s("div",h,c(_.value),1)):0===C.value.length?(v(),s("div",k,"無宗親會")):(v(),s("div",g,[u("table",w,[l[3]||(l[3]=u("thead",null,[u("tr",null,[u("th",null,"ID"),u("th",null,"名稱"),u("th",null,"城市"),u("th",null,"電話"),u("th",null,"電郵"),u("th",null,"操作")])],-1)),u("tbody",null,[(v(!0),s(d,null,m(C.value,a=>(v(),s("tr",{key:a.companyId},[u("td",null,c(a.companyId),1),u("td",null,c(a.name),1),u("td",null,c(a.city),1),u("td",null,c(a.phone),1),u("td",null,c(a.email),1),u("td",null,[o(t,{to:`/company/edit/${a.companyId}`,class:"btn btn-warning btn-sm"},{default:i(()=>[...l[2]||(l[2]=[y("編輯",-1)])]),_:1},8,["to"]),u("button",{class:"btn btn-danger btn-sm",onClick:l=>async function(a){if(confirm("確定要刪除此宗親會嗎？"))try{await S.delete(a),j.success("宗親會已刪除"),await q()}catch(l){j.error((null==l?void 0:l.message)||"刪除失敗")}}(a.companyId)},"刪除",8,I)])]))),128))])])]))])}}});export{j as default};
