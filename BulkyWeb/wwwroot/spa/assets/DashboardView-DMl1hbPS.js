import{u as s}from"./index-C6TQgNXw.js";import{a,r as l,f as t,o as c,k as e,l as d,t as r,m as i,w as o,b as n,F as u,s as m,e as b,q as v}from"./vendor-vue-IgQ0LSVQ.js";import{_ as p}from"./_plugin-vue_export-helper-BCo6x5W8.js";const y={class:"container-fluid py-5"},x={class:"row mb-5"},f={class:"col-12"},h={class:"text-muted"},g={class:"row mb-4"},C={class:"col-md-3 mb-3"},k={class:"card"},_={class:"card-body"},w={class:"mb-0"},j={class:"col-md-3 mb-3"},U={class:"card"},A={class:"card-body"},R={class:"mb-0"},F={class:"col-md-3 mb-3"},q={class:"card"},D={class:"card-body"},E={class:"mb-0"},I={class:"col-md-3 mb-3"},P={class:"card"},V={class:"card-body"},z={class:"mb-0"},B={class:"row"},G={class:"col-lg-4 mb-4"},H={class:"card"},J={class:"card-body text-center"},K={class:"col-lg-4 mb-4"},L={class:"card"},M={class:"card-body text-center"},N={class:"col-lg-4 mb-4"},O={class:"card"},Q={class:"card-body text-center"},S={class:"col-lg-4 mb-4"},T={class:"card"},W={class:"card-body text-center"},X={class:"col-lg-4 mb-4"},Y={class:"card"},Z={class:"card-body text-center"},$={class:"col-lg-4 mb-4"},ss={class:"card"},as={class:"card-body text-center"},ls={class:"row mt-5"},ts={class:"col-12"},cs={class:"card"},es={class:"card-body"},ds={class:"mb-1"},rs={class:"badge bg-primary"},is={class:"mb-0"},os=p(a({__name:"DashboardView",setup(a){const p=s(),os=l({totalUsers:0,adminCount:0,customerCount:0,otherRolesCount:0}),ns=t(()=>{var s;return(null==(s=p.user)?void 0:s.email)||"Unknown"}),us=t(()=>{var s;return(null==(s=p.user)?void 0:s.roles)||[]}),ms=t(()=>"Production");return c(()=>async function(){try{const s=await fetch("/api/admin/users",{credentials:"include"});if(s.ok){const a=await s.json();os.value.totalUsers=a.length,os.value.adminCount=a.filter(s=>{var a;return null==(a=s.roles)?void 0:a.includes("Admin")}).length,os.value.customerCount=a.filter(s=>{var a;return null==(a=s.roles)?void 0:a.includes("Customer")}).length,os.value.otherRolesCount=a.filter(s=>{var a;return null==(a=s.roles)?void 0:a.some(s=>"Admin"!==s&&"Customer"!==s)}).length-os.value.customerCount}}catch(s){console.error("Failed to load stats:",s)}}()),(s,a)=>{const l=n("router-link");return b(),e("div",y,[d("div",x,[d("div",f,[a[0]||(a[0]=d("h1",{class:"mb-2"},"管理者儀表板",-1)),d("p",h,"歡迎, "+r(ns.value),1)])]),d("div",g,[d("div",C,[d("div",k,[d("div",_,[a[1]||(a[1]=d("h6",{class:"card-title text-muted"},"會員總數",-1)),d("h3",w,r(os.value.totalUsers),1)])])]),d("div",j,[d("div",U,[d("div",A,[a[2]||(a[2]=d("h6",{class:"card-title text-muted"},"管理員",-1)),d("h3",R,r(os.value.adminCount),1)])])]),d("div",F,[d("div",q,[d("div",D,[a[3]||(a[3]=d("h6",{class:"card-title text-muted"},"會員",-1)),d("h3",E,r(os.value.customerCount),1)])])]),d("div",I,[d("div",P,[d("div",V,[a[4]||(a[4]=d("h6",{class:"card-title text-muted"},"其他角色",-1)),d("h3",z,r(os.value.otherRolesCount),1)])])])]),d("div",B,[d("div",G,[d("div",H,[d("div",J,[a[6]||(a[6]=d("i",{class:"bi bi-people fs-1 text-primary mb-3",style:{display:"block"}},null,-1)),a[7]||(a[7]=d("h5",{class:"card-title"},"會員管理",-1)),a[8]||(a[8]=d("p",{class:"card-text text-muted small"}," 管理系統使用者、分配角色和權限 ",-1)),i(l,{to:"/app/admin/users",class:"btn btn-primary btn-sm"},{default:o(()=>[...a[5]||(a[5]=[v(" 進入會員管理 ",-1)])]),_:1})])])]),d("div",K,[d("div",L,[d("div",M,[a[10]||(a[10]=d("i",{class:"bi bi-tags fs-1 text-info mb-3",style:{display:"block"}},null,-1)),a[11]||(a[11]=d("h5",{class:"card-title"},"活動類別",-1)),a[12]||(a[12]=d("p",{class:"card-text text-muted small"}," 新增、編輯和管理活動類別 ",-1)),i(l,{to:"/app/category",class:"btn btn-info btn-sm"},{default:o(()=>[...a[9]||(a[9]=[v(" 進入類別管理 ",-1)])]),_:1})])])]),d("div",N,[d("div",O,[d("div",Q,[a[14]||(a[14]=d("i",{class:"bi bi-building fs-1 text-success mb-3",style:{display:"block"}},null,-1)),a[15]||(a[15]=d("h5",{class:"card-title"},"宗親會基本檔",-1)),a[16]||(a[16]=d("p",{class:"card-text text-muted small"}," 管理宗親會組織資訊 ",-1)),i(l,{to:"/app/company",class:"btn btn-success btn-sm"},{default:o(()=>[...a[13]||(a[13]=[v(" 進入宗親會管理 ",-1)])]),_:1})])])]),d("div",S,[d("div",T,[d("div",W,[a[18]||(a[18]=d("i",{class:"bi bi-box fs-1 text-warning mb-3",style:{display:"block"}},null,-1)),a[19]||(a[19]=d("h5",{class:"card-title"},"活動基本檔",-1)),a[20]||(a[20]=d("p",{class:"card-text text-muted small"}," 新增、編輯和管理活動商品 ",-1)),i(l,{to:"/app/product",class:"btn btn-warning btn-sm"},{default:o(()=>[...a[17]||(a[17]=[v(" 進入活動管理 ",-1)])]),_:1})])])]),d("div",X,[d("div",Y,[d("div",Z,[a[22]||(a[22]=d("i",{class:"bi bi-building-check fs-1 text-danger mb-3",style:{display:"block"}},null,-1)),a[23]||(a[23]=d("h5",{class:"card-title"},"懷恩塔-塔位管理",-1)),a[24]||(a[24]=d("p",{class:"card-text text-muted small"}," 管理懷恩塔塔位資訊和位置 ",-1)),i(l,{to:"/app/kindness",class:"btn btn-danger btn-sm"},{default:o(()=>[...a[21]||(a[21]=[v(" 進入塔位管理 ",-1)])]),_:1})])])]),d("div",$,[d("div",ss,[d("div",as,[a[26]||(a[26]=d("i",{class:"bi bi-houses fs-1 text-secondary mb-3",style:{display:"block"}},null,-1)),a[27]||(a[27]=d("h5",{class:"card-title"},"陳氏宗祠-牌位管理",-1)),a[28]||(a[28]=d("p",{class:"card-text text-muted small"}," 管理陳氏宗祠祖先牌位資訊 ",-1)),i(l,{to:"/app/ancestral",class:"btn btn-secondary btn-sm"},{default:o(()=>[...a[25]||(a[25]=[v(" 進入牌位管理 ",-1)])]),_:1})])])])]),d("div",ls,[d("div",ts,[d("div",cs,[a[31]||(a[31]=d("div",{class:"card-header"},[d("h6",{class:"mb-0"},"系統資訊")],-1)),d("div",es,[d("p",ds,[a[29]||(a[29]=d("strong",null,"環境:",-1)),d("span",rs,r(ms.value),1)]),d("p",is,[a[30]||(a[30]=d("strong",null,"您的角色:",-1)),(b(!0),e(u,null,m(us.value,s=>(b(),e("span",{key:s,class:"badge bg-info me-1"},r(function(s){return{Admin:"管理員",Customer:"客戶",Employee:"員工",Company:"公司"}[s]||s}(s)),1))),128))])])])])])])}}}),[["__scopeId","data-v-f8a35a8f"]]);export{os as default};
