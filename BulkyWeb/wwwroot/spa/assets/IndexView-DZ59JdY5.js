import{c as l}from"./crudService-BUEYyYuV.js";import{u as a}from"./notificationStore-Dw0I-Rqg.js";import{a as e,r as t,o as s,k as n,l as u,m as r,w as i,b as o,t as d,F as c,s as v,e as m,q as b}from"./vendor-vue-IgQ0LSVQ.js";import"./index-C6TQgNXw.js";const f={class:"container-fluid py-4"},y={class:"d-flex justify-content-between align-items-center mb-3"},p={key:0,class:"alert alert-info"},h={key:1,class:"alert alert-danger"},g={key:2,class:"alert alert-warning"},k={key:3,class:"table-responsive"},w={class:"table table-hover"},I=["onClick"],j=e({__name:"IndexView",setup(e){const j=a(),x=t(!1),_=t(null),C=t([]),S=l("/user");async function q(){x.value=!0,_.value=null;try{const{data:l}=await S.list();C.value=l.data||[]}catch(l){_.value=(null==l?void 0:l.message)||"加載失敗"}finally{x.value=!1}}return s(()=>q()),(l,a)=>{const e=o("router-link");return m(),n("div",f,[u("div",y,[a[1]||(a[1]=u("h2",null,"會員管理",-1)),r(e,{to:"/app/user/add",class:"btn btn-primary"},{default:i(()=>[...a[0]||(a[0]=[b("新增會員",-1)])]),_:1})]),x.value?(m(),n("div",p,"加載中...")):_.value?(m(),n("div",h,d(_.value),1)):0===C.value.length?(m(),n("div",g,"無會員")):(m(),n("div",k,[u("table",w,[a[3]||(a[3]=u("thead",null,[u("tr",null,[u("th",null,"ID"),u("th",null,"用戶名"),u("th",null,"電郵"),u("th",null,"角色"),u("th",null,"操作")])],-1)),u("tbody",null,[(m(!0),n(c,null,v(C.value,l=>(m(),n("tr",{key:l.userId},[u("td",null,d(l.userId),1),u("td",null,d(l.username),1),u("td",null,d(l.email),1),u("td",null,[(m(!0),n(c,null,v(l.roles,l=>(m(),n("span",{key:l,class:"badge bg-info me-1"},d(l),1))),128))]),u("td",null,[r(e,{to:`/user/edit/${l.userId}`,class:"btn btn-warning btn-sm"},{default:i(()=>[...a[2]||(a[2]=[b("編輯",-1)])]),_:1},8,["to"]),u("button",{class:"btn btn-danger btn-sm",onClick:a=>async function(l){if(confirm("確定要刪除此會員嗎？"))try{await S.delete(l),j.success("會員已刪除"),await q()}catch(a){j.error((null==a?void 0:a.message)||"刪除失敗")}}(l.userId)},"刪除",8,I)])]))),128))])])]))])}}});export{j as default};
