import{a as l,r as a,k as e,l as t,z as s,A as n,D as u,F as o,s as r,t as c,e as i,m as d,w as v,q as m,b as p}from"./vendor-vue-IgQ0LSVQ.js";import{a as b}from"./ancestralService-DPyO3fCv.js";import{_ as f}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-C6TQgNXw.js";const h={class:"container-fluid py-4"},y={class:"card mb-3"},k={class:"card-body"},g={class:"row"},w={class:"col-md-4"},_={class:"col-md-4"},I=["value"],j={key:0,class:"alert alert-info"},x={key:1,class:"alert alert-danger"},D={key:2,class:"alert alert-warning"},P={key:3},V={class:"table-responsive"},q={class:"table table-hover"},z=f(l({__name:"QueryView",setup(l){const f=a(!1),z=a(null),N=a(""),S=a(""),U=a([]),A=a(["甲區","乙區","丙區","丁區","中區"]);function C(l){if(!l)return"-";return new Date(l).toLocaleDateString("zh-TW")}async function F(){f.value=!0,z.value=null;try{const{data:l}=await b.query({occupantName:N.value,section:S.value});U.value=l.data||[]}catch(l){z.value=(null==l?void 0:l.message)||"查詢失敗"}finally{f.value=!1}}return(l,a)=>{const b=p("router-link");return i(),e("div",h,[a[8]||(a[8]=t("h2",null,"陳氏宗祠-牌位查詢",-1)),t("div",y,[t("div",k,[t("div",g,[t("div",w,[a[2]||(a[2]=t("label",{class:"form-label"},"搜尋名稱",-1)),s(t("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>N.value=l),type:"text",class:"form-control",placeholder:"輸入佔用者名稱"},null,512),[[n,N.value]])]),t("div",_,[a[4]||(a[4]=t("label",{class:"form-label"},"選擇區域",-1)),s(t("select",{"onUpdate:modelValue":a[1]||(a[1]=l=>S.value=l),class:"form-select"},[a[3]||(a[3]=t("option",{value:""},"全部",-1)),(i(!0),e(o,null,r(A.value,l=>(i(),e("option",{key:l,value:l},c(l),9,I))),128))],512),[[u,S.value]])]),t("div",{class:"col-md-4"},[a[5]||(a[5]=t("label",{class:"form-label"}," ",-1)),t("button",{onClick:F,class:"btn btn-primary w-100"},"查詢")])])])]),f.value?(i(),e("div",j,"查詢中...")):z.value?(i(),e("div",x,c(z.value),1)):0===U.value.length?(i(),e("div",D,"無符合結果")):(i(),e("div",P,[t("div",V,[t("table",q,[a[7]||(a[7]=t("thead",null,[t("tr",null,[t("th",null,"位置ID"),t("th",null,"區域"),t("th",null,"層級"),t("th",null,"位置"),t("th",null,"佔用者"),t("th",null,"電話"),t("th",null,"登記日期"),t("th",null,"操作")])],-1)),t("tbody",null,[(i(!0),e(o,null,r(U.value,l=>(i(),e("tr",{key:l.ancestralPositionId},[t("td",null,c(l.ancestralPositionId),1),t("td",null,c(l.section),1),t("td",null,c(l.level),1),t("td",null,c(l.position),1),t("td",null,c(l.occupantName||"-"),1),t("td",null,c(l.phone||"-"),1),t("td",null,c(C(l.dateRegistered)),1),t("td",null,[d(b,{to:`/ancestral/edit/${l.ancestralPositionId}`,class:"btn btn-warning btn-sm"},{default:v(()=>[...a[6]||(a[6]=[m("編輯",-1)])]),_:1},8,["to"])])]))),128))])])])]))])}}}),[["__scopeId","data-v-0faf2765"]]);export{z as default};
