import{c as l}from"./crudService-DJEaAHbi.js";import{u as a}from"./notificationStore-Dw0I-Rqg.js";import{a as s,r as t,o as e,k as d,l as n,m as i,w as r,b as c,t as o,F as u,s as b,e as v,q as f}from"./vendor-vue-IgQ0LSVQ.js";import"./index-N31TBcPX.js";const p={class:"card shadow border-0 my-4"},w={class:"card-body p-4"},y={class:"row pb-3"},m={class:"col-6 text-end"},h={key:0,class:"alert alert-info fw-bold"},g={key:1,class:"alert alert-danger fw-bold"},k={key:2,class:"alert alert-warning fw-bold"},x={key:3,class:"table-responsive"},j={class:"table table-bordered table-striped fw-bold",style:{width:"100%"}},_={class:"text-center"},Y={key:0,class:"badge bg-success fw-bold"},A={key:1,class:"badge bg-danger fw-bold"},C={class:"text-center"},N=["onClick"],S=s({__name:"IndexView",setup(s){const S=a(),q=t(!1),D=t(null),F=t([]),I=l("/product");async function V(){var l;q.value=!0,D.value=null;try{const{data:a}=await I.list();(null==a?void 0:a.data)?F.value=Array.isArray(a.data)?a.data:(null==(l=a.data)?void 0:l.items)||[]:F.value=[]}catch(a){D.value=(null==a?void 0:a.message)||"加載失敗"}finally{q.value=!1}}return e(()=>V()),(l,a)=>{const s=c("router-link");return v(),d("div",p,[a[5]||(a[5]=n("div",{class:"card-header bg-secondary bg-gradient ml-0 py-3"},[n("div",{class:"row"},[n("div",{class:"col-12 text-center"},[n("h2",{class:"text-white py-2 fw-bold"},"活動清單")])])],-1)),n("div",w,[n("div",y,[a[1]||(a[1]=n("div",{class:"col-6"},null,-1)),n("div",m,[i(s,{to:"/app/product/add",class:"btn btn-primary fw-bold"},{default:r(()=>[...a[0]||(a[0]=[n("i",{class:"bi bi-plus-circle fw-bold"},null,-1),f(" 新增活動 ",-1)])]),_:1})])]),q.value?(v(),d("div",h,"加載中...")):D.value?(v(),d("div",g,o(D.value),1)):0===F.value.length?(v(),d("div",k,"無活動項目")):(v(),d("div",x,[n("table",j,[a[4]||(a[4]=n("thead",{class:"table-light"},[n("tr",null,[n("th",null,"名稱"),n("th",null,"舉辦(是Y/否N)"),n("th",null,"日期"),n("th")])],-1)),n("tbody",null,[(v(!0),d(u,null,b(F.value,l=>(v(),d("tr",{key:l.id},[n("td",null,o(l.title),1),n("td",_,["Y"===l.heldYN?(v(),d("span",Y,"是")):(v(),d("span",A,"否"))]),n("td",null,o(l.hDate||"未設定"),1),n("td",C,[i(s,{to:`/app/product/edit/${l.id}`,class:"btn btn-warning btn-sm fw-bold me-1"},{default:r(()=>[...a[2]||(a[2]=[n("i",{class:"bi bi-pencil-fill"},null,-1),f(" 編輯 ",-1)])]),_:1},8,["to"]),n("button",{class:"btn btn-danger btn-sm fw-bold",onClick:a=>async function(l){if(confirm("確定要刪除此活動嗎？"))try{await I.delete(l),S.success("活動已刪除"),await V()}catch(a){S.error((null==a?void 0:a.message)||"刪除失敗")}}(l.id)},[...a[3]||(a[3]=[n("i",{class:"bi bi-trash-fill"},null,-1),f(" 刪除 ",-1)])],8,N)])]))),128))])])]))])])}}});export{S as default};
